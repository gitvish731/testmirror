// ES5/extended-safe: no backticks, no arrow functions
// This returns a tiny page + the raw summary JSON.
export default function handleSummary(data) {
  var html =
    '<!doctype html><html><head><meta charset="utf-8">' +
    '<title>SDLC Auto Gov Load Test</title></head><body>' +
    '<h2>Custom summary active</h2>' +
    '<p>Checks: ' + (data && data.root_group && data.root_group.checks ? data.root_group.checks.length : 0) + '</p>' +
    '</body></html>';

  var text = '=== Enhanced summary active ===\n';

  return {
    // pretty console line so you can see it was used
    stdout: text,

    // write files
    "perf/k6/reports/summary.html": html,
    "perf/k6/reports/summary.json": JSON.stringify(data, null, 2)
  };
}
